---
interface Props {
  title: string;
  author: string;
  authorPhoto?: string;
  date: string;
  category: string;
  image: string;
  slug: string;
}

const { title, author, authorPhoto, date, category, image, slug } = Astro.props;
---

<article class="group">
  <a href={`/insight/${slug}`} class="block">
    <!-- Image Container - proportional height based on ~317px for ~471px width = aspect ratio ~1.48:1 -->
    <div class="overflow-hidden rounded-t-[14px] aspect-[471/317]">
      <img
        src={image}
        alt={title}
        class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
      />
    </div>

    <!-- Content Container - ~249px height for ~471px width -->
    <div class="bg-white border border-black/50 rounded-b-[14px] p-4 md:p-6 lg:p-8 min-h-[180px] md:min-h-[220px] lg:min-h-[249px] flex flex-col justify-between">
      <div>
        <!-- Author -->
        <div class="flex items-center gap-2 md:gap-3 mb-2 md:mb-3 lg:mb-4">
          <div class="w-[20px] h-[20px] md:w-[24px] md:h-[24px] lg:w-[28px] lg:h-[28px] rounded-full bg-gray-100 overflow-hidden flex-shrink-0">
            {authorPhoto ? (
              <img src={authorPhoto} alt={author} class="w-full h-full object-cover" />
            ) : (
              <svg class="w-full h-full" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="14" cy="14" r="13" stroke="#969696" stroke-width="1.5"/>
                <circle cx="14" cy="11" r="4.5" stroke="#969696" stroke-width="1.5"/>
                <path d="M5.5 24C5.5 20.134 8.63401 17 12.5 17H15.5C19.366 17 22.5 20.134 22.5 24" stroke="#969696" stroke-width="1.5"/>
              </svg>
            )}
          </div>
          <span class="text-[10px] md:text-[11.5px] lg:text-[13.18px] font-normal text-[#969696] leading-tight truncate">
            {author}
          </span>
        </div>

        <!-- Title -->
        <h3 class="text-[16px] md:text-[21px] lg:text-[26.49px] font-light text-[#222222] leading-[1.3] md:leading-[1.25] lg:leading-[1.235] tracking-tight md:tracking-[-0.8px] lg:tracking-[-1.32px] line-clamp-3 md:line-clamp-none mb-3 md:mb-0">
          {title}
        </h3>
      </div>

      <!-- Category & Date -->
      <div class="flex flex-wrap items-center gap-2 md:gap-3 lg:gap-4 mt-auto">
        <div class="flex items-center justify-center px-[8px] py-[4px] md:px-[8px] md:py-[6px] lg:px-[10px] lg:py-[8px] border md:border-[1.5px] lg:border-2 border-[#5e5151] rounded-full">
          <span class="text-[10px] md:text-[11px] lg:text-[12.31px] font-medium text-black leading-none uppercase">
            {category}
          </span>
        </div>
        <span class="text-[10px] md:text-[13px] lg:text-[16.66px] font-light text-[#2b2b2b] leading-tight">
          {date}
        </span>
      </div>
    </div>
  </a>
</article>
